基于物联网的智慧停车系统得到了广泛的应用，可以实时探测车位的车辆是否被占用，并显示剩余车辆数量。要求基于嵌入式系统构成物联网，实现对车位停车的监测。

系统采用超声波雷达探测，由RS485总线将数据传输给上位机，上位机处理显示并驱动显示单元进行显示。同时嵌入式系统一般更改程序是在嵌入式系统产品定型时直接烧录的。然而，在实际应用中嵌入式MCU需要具有远程程序升级功能，避免拆装单片机产品或召回升级。

因此，需要对MCU加入Bootloader功能，采用无线4G/5G网络实现对MCU的远程升级。结合商用4G/5G无线模块，开发相关无线网络应用程序，以适应不同的通信接口，使得嵌入式系统具有在线远程升级功能。

## 原理与方案调研


### 基于MCU的超声波雷达探测原理


### RS485通信协议

#### 什么是RS485？

一种信号传输方式，OSI模型的第一层级。

串行RS-485的连接是使用两根或者三根电缆，实现差分信号的传输。这种方式可以抑制共模干扰信号，提高信号传输的抗干扰能力。

- DATA+
- DATA-
- GND

#### RS485通信物理链路构成

RS485采用半双工的工作方式，即数据双向传输但不能同时进行，一条通讯线路支持多点数据的通信。

RS485的总线网络拓扑一般采用终端匹配的总线型结构，即一条总线将各个节点手牵手连接起来。

理论上的最长传输距离是1200m。可以定义一个主站和最多32个从站【那么问题来了，显然要检测的目标超过32个，需要多个组网】

### 嵌入式系统IAP的BootLoader工作原理

IAP（In-Application Programming，应用中编程）是 MCU 在运行过程中通过特定接口对自身 Flash 进行编程的核心技术。可实现设备固件的远程 / 本地升级，无需拆卸硬件，极大降低工业控制、物联网终端、智能硬件等场景的维护成本，是嵌入式设备迭代优化的关键能力。

### 文献资料


## 工程样机实现方案

一些亟待解决的问题：

正点原子STM32F407探索者开发板怎么连接RS485总线？

### MCU主板


### 超声波雷达


### 5G模块
