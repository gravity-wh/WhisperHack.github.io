一年前的秋季学习，我跟着王炎老师初步学习了计网，具体说来是《计算机网络：自顶向下方法》。事实上，作为信息工程专业的同学，我们的课程叫做信息通信网络。

我觉得这是一门和Internet Surfing关联最大的课程。在搭建自己的网站时，我再次体会到了计网的重要性。下面让我重新整理一下自己在计网上感到迷惑的地方。

### 公网IP 和 主私网IP
116.62.218.129可以让全球任何一个联网设备访问到我。

172.20.206.24则是阿里云服务器的内网IP，只有在同一内网下的设备才能访问到它。

IPV4地址分为五类：A、B、C、D、E类。其中A、B、C类地址用于主机地址分配，D类地址用于多播，E类地址保留用于未来使用。

| 类别 | 第一个八位字节范围（二进制前缀） | 第一个十进制数范围 | 地址范围示例 | 主要用途 | 默认子网掩码 |
|------|------|------|------|------|------|
| A | 首位为0 | 0 ~ 127 | 0.0.0.0 ~ 127.255.255.255 | 大型网络（支持超千万主机） | 255.0.0.0 (/8) |
| B | 前两位为10 | 128 ~ 191 | 128.0.0.0 ~ 191.255.255.255 | 中型网络（支持数万主机） | 255.255.0.0 (/16) |
| C | 前三位为110 | 192 ~ 223 | 192.0.0.0 ~ 223.255.255.255 | 小型网络（最常用，支持254主机） | 255.255.255.0 (/24) |
| D | 前四位为1110 | 224 ~ 239 | 224.0.0.0 ~ 239.255.255.255 | 组播（Multicast）地址，不用于单播主机分配 | 无子网掩码 |
| E | 前四位为1111 | 240 ~ 255 | 240.0.0.0 ~ 255.255.255.255 | 保留用于实验和未来用途，目前未公开使用 | 无子网掩码 |

公网IP地址是由互联网分配号码局（IANA）统一分配和管理的，而私网IP地址则是由各个组织或个人自行分配和管理的。

显然，我的公网IP属于A类地址，而阿里云的内网IP属于B类地址。

### 端口号
目前多多少少接触到一些常用端口对应的服务：
- 80：HTTP
- 443：HTTPS
- 22：SSH（Secure Shell，安全外壳协议）
- 21：FTP（File Transfer Protocol，文件传输协议）
- 53：DNS（Domain Name System，域名系统）
- 25：SMTP（Simple Mail Transfer Protocol，简单邮件传输协议）
  
一台计算机一共有65536个端口,最大端口号是FFFF。大致可以分成三类:
- 0-1023：知名端口（Well-known Ports），这些端口号被分配给常用的服务和协议，由互联网分配号码局（IANA）管理,如上面所列。 
- 1024-49151：注册端口（Registered Ports），这些端口号可以被用户进程或应用程序使用，但需要向IANA注册。
  例如：
  - 3306：MySQL数据库默认端口
  - 5000：VNC（Virtual Network Computing，虚拟网络计算）远程桌面服务默认端口
- 49152-65535：动态或私有端口（Dynamic or Private Ports），这些端口号通常用于临时通信，用户可以自由使用，无需注册。
  
以HTTP为例，如果IIS服务器运行在默认的80端口上，那么用户在浏览器中输入http://www.example.com时，浏览器会自动连接到服务器的80端口。如果IIS服务器运行在8080端口上，用户需要在浏览器中输入http://www.example.com:8080才能访问该服务。

那么，IIS是如何做到在一个端口号上运行多个网站的呢？
答案是通过主机头（Host Header）来实现的。主机头允许服务器根据请求中的主机名来区分不同的网站，从而在同一个端口上托管多个网站。
并且这种解析映射可以是多对一的关系。

### HTTP 和 HTTPS 
多出来的一个S代表Secure（安全的），HTTPS在HTTP的基础上增加了SSL/TLS协议，用于加密数据传输，确保数据的机密性和完整性。

具体来说，要想使用HTTPS，需要以下几个步骤：
1. 获取SSL/TLS证书：网站所有者需要从受信任的证书颁发机构（CA）获取SSL/TLS证书。这个证书包含了网站的公钥以及其他信息，用于验证网站的身份。

要想获得证书，需要生成一个证书签名请求（CSR），然后将其提交给CA。CA会验证网站所有者的身份，并颁发证书。

2. 配置服务器：网站所有者需要在服务器上安装和配置SSL/TLS证书。这通常涉及到将证书文件上传到服务器，并配置Web服务器软件（如IIS、Apache、Nginx等）以启用HTTPS。

3. 重定向HTTP到HTTPS：为了确保所有流量都通过加密连接传输，网站所有者通常会配置服务器将所有HTTP请求重定向到HTTPS。

那么，HTTPS听起来似乎仅仅是多走了一道程序，申请证书然后配置，为什么就能做到数据加密传输呢？

答案在于SSL/TLS协议。SSL/TLS协议使用公钥加密和对称加密相结合的方式来保护数据传输数据。对称加密比公钥加密更快，因此适合用于大量数据的传输。

